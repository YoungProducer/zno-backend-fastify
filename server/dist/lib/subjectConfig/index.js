"use strict";
/**
 * Created by: Oleksandr Bezrukov
 * Creation date: 11 March 2020
 *
 * Subject config controller to handle all actions with subject config.
 */
const createConfigHandler = (req, reply) => {
};
const configHandler = async (fastify, req, reply) => {
    const id = req.params.subject;
    try {
        const config = await fastify.subjectConfigService.config(id);
        reply.send(config);
    }
    catch (err) {
        reply.send(err);
    }
};
module.exports = async function (fastify, opts) {
    fastify.register(async (fastify) => {
        fastify.addHook('preHandler', async (req, reply) => {
            await fastify.authPreHandler(req, reply);
            return;
        });
        fastify.get('/config/:subject', async (req, reply) => await configHandler(fastify, req, reply));
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvc3ViamVjdENvbmZpZy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7O0dBS0c7QUF5QkgsTUFBTSxtQkFBbUIsR0FBRyxDQUN4QixHQUFvQyxFQUNwQyxLQUFtQyxFQUNyQyxFQUFFO0FBRUosQ0FBQyxDQUFDO0FBRUYsTUFBTSxhQUFhLEdBQUcsS0FBSyxFQUN2QixPQUF3QixFQUN4QixHQUFvQyxFQUNwQyxLQUFtQyxFQUNyQyxFQUFFO0lBQ0EsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFFOUIsSUFBSTtRQUNBLE1BQU0sTUFBTSxHQUFHLE1BQU0sT0FBTyxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUU3RCxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ3RCO0lBQUMsT0FBTyxHQUFHLEVBQUU7UUFDVixLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQ25CO0FBQ0wsQ0FBQyxDQUFDO0FBekNGLGlCQUFTLEtBQUssV0FDVixPQUF3QixFQUN4QixJQUFTO0lBRVQsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsT0FBd0IsRUFBRSxFQUFFO1FBQ2hELE9BQU8sQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLEtBQUssRUFDL0IsR0FBb0MsRUFDcEMsS0FBbUMsRUFDckMsRUFBRTtZQUNBLE1BQU0sT0FBTyxDQUFDLGNBQWMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDekMsT0FBTztRQUNYLENBQUMsQ0FBQyxDQUFDO1FBRUgsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxLQUFLLEVBQ2pDLEdBQW9DLEVBQ3BDLEtBQW1DLEVBQ3JDLEVBQUUsQ0FBQyxNQUFNLGFBQWEsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDbkQsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnk6IE9sZWtzYW5kciBCZXpydWtvdlxuICogQ3JlYXRpb24gZGF0ZTogMTEgTWFyY2ggMjAyMFxuICpcbiAqIFN1YmplY3QgY29uZmlnIGNvbnRyb2xsZXIgdG8gaGFuZGxlIGFsbCBhY3Rpb25zIHdpdGggc3ViamVjdCBjb25maWcuXG4gKi9cblxuaW1wb3J0IHsgRmFzdGlmeUluc3RhbmNlLCBGYXN0aWZ5UmVxdWVzdCwgRmFzdGlmeVJlcGx5IH0gZnJvbSAnZmFzdGlmeSc7XG5pbXBvcnQgeyBTZXJ2ZXJSZXNwb25zZSwgSW5jb21pbmdNZXNzYWdlIH0gZnJvbSAnaHR0cCc7XG5cbmV4cG9ydCA9IGFzeW5jIGZ1bmN0aW9uIChcbiAgICBmYXN0aWZ5OiBGYXN0aWZ5SW5zdGFuY2UsXG4gICAgb3B0czogYW55LFxuKSB7XG4gICAgZmFzdGlmeS5yZWdpc3Rlcihhc3luYyAoZmFzdGlmeTogRmFzdGlmeUluc3RhbmNlKSA9PiB7XG4gICAgICAgIGZhc3RpZnkuYWRkSG9vaygncHJlSGFuZGxlcicsIGFzeW5jIChcbiAgICAgICAgICAgIHJlcTogRmFzdGlmeVJlcXVlc3Q8SW5jb21pbmdNZXNzYWdlPixcbiAgICAgICAgICAgIHJlcGx5OiBGYXN0aWZ5UmVwbHk8U2VydmVyUmVzcG9uc2U+LFxuICAgICAgICApID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGZhc3RpZnkuYXV0aFByZUhhbmRsZXIocmVxLCByZXBseSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZhc3RpZnkuZ2V0KCcvY29uZmlnLzpzdWJqZWN0JywgYXN5bmMgKFxuICAgICAgICAgICAgcmVxOiBGYXN0aWZ5UmVxdWVzdDxJbmNvbWluZ01lc3NhZ2U+LFxuICAgICAgICAgICAgcmVwbHk6IEZhc3RpZnlSZXBseTxTZXJ2ZXJSZXNwb25zZT4sXG4gICAgICAgICkgPT4gYXdhaXQgY29uZmlnSGFuZGxlcihmYXN0aWZ5LCByZXEsIHJlcGx5KSk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBjcmVhdGVDb25maWdIYW5kbGVyID0gKFxuICAgIHJlcTogRmFzdGlmeVJlcXVlc3Q8SW5jb21pbmdNZXNzYWdlPixcbiAgICByZXBseTogRmFzdGlmeVJlcGx5PFNlcnZlclJlc3BvbnNlPixcbikgPT4ge1xuXG59O1xuXG5jb25zdCBjb25maWdIYW5kbGVyID0gYXN5bmMgKFxuICAgIGZhc3RpZnk6IEZhc3RpZnlJbnN0YW5jZSxcbiAgICByZXE6IEZhc3RpZnlSZXF1ZXN0PEluY29taW5nTWVzc2FnZT4sXG4gICAgcmVwbHk6IEZhc3RpZnlSZXBseTxTZXJ2ZXJSZXNwb25zZT4sXG4pID0+IHtcbiAgICBjb25zdCBpZCA9IHJlcS5wYXJhbXMuc3ViamVjdDtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGZhc3RpZnkuc3ViamVjdENvbmZpZ1NlcnZpY2UuY29uZmlnKGlkKTtcblxuICAgICAgICByZXBseS5zZW5kKGNvbmZpZyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcGx5LnNlbmQoZXJyKTtcbiAgICB9XG59O1xuIl19